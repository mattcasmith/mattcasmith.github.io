<!doctype html>
<head>
	<meta name="description" content="" />
	<meta name="robots" content="index, follow" />
	<meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
	<meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
	<link rel="canonical" href="https://mattcasmith.net/2017/11/30/creating-beautiful-graphs-in-python-with-plotly/" />
	<meta property="og:locale" content="en_GB" />
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Creating beautiful graphs in Python with Plotly | MattCASmith" />
	<meta property="og:description" content="" />
	<meta property="og:url" content="https://mattcasmith.net/2017/11/30/creating-beautiful-graphs-in-python-with-plotly/" />
	<meta property="og:site_name" content="MattCASmith" />
	<meta property="article:published_time" content="2020-05-02T11:05:40+00:00" />
	<meta property="og:image" content="https://mattcasmith.net/wp-content/uploads/2017/11/chelsea-CC-516x270.jpg" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:creator" content="@mattcasmith" />
	<meta name="twitter:site" content="@mattcasmith" />
</head>
	<head>
		<title>Creating beautiful graphs in Python with Plotly | MattCASmith</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="shortcut icon" href="/assets/images/favicon.png">
		<link rel="stylesheet" href="/assets/css/styles.css">
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
		
	</head>
	
	<body>
		<div id="site-container" class="post">
		<div id="header">
			<div id="header_left">
				<a href="/"><img class="site_logo light" src="/assets/images/mcas_site_logo.png"></a>
				<a href="/"><img class="site_logo dark" src="/assets/images/mcas_site_logo_dark.png"></a>
				<a href="/"><h2>MattCASmith</h2></a>
			</div>
			<div id="header_right">
				<a target="_blank" href="https://twitter.com/mattcasmith"><img class="link_icon_twitter" src="/assets/images/twitter_icon.png"></a>
				<a target="_blank" href="mailto:mattcasmith@protonmail.com"><img class="link_icon_email light" src="/assets/images/email_icon.png"></a>
				<a target="_blank" href="mailto:mattcasmith@protonmail.com"><img class="link_icon_email dark" src="/assets/images/email_icon_dark.png"></a>
			</div>
		</div>
		
		<div class="title">
			<h1 class="entry-title">Creating beautiful graphs in Python with Plotly</h1>
		</div>
		
		<div class="meta">
			<span class="year_label">2017-11-30</span> |&nbsp;&nbsp;&nbsp; 
				
				
					<a href="/category/programming.html">Programming</a>
				
			
		</div>
		
		<img src="/wp-content/uploads/2017/11/chelsea-CC-516x270.jpg" alt="Creating beautiful graphs in Python with Plotly" />
		
		<p>After I managed to <a href="http://mattcasmith.net/2017/11/24/fetching-and-filtering-tweets-in-python-with-tweepy/">pull data from Twitter’s API using Python</a>, I got thinking about what my next step would be. Then it hit me – I could draw data from external sources and find a nice extension to visualise it in some pretty graphs. Plotly is that extension.<!--more--></p>

<p>My thinking was that this could be used in a SIEM-like way to make sense of the huge amounts of data spat out by cyber security solutions. To test it out, though, I decided to fight back against those writing Chelsea off after a bit of a rocky period by comparing their Premier League performance this year to the beginning of the title-winning 2016/17 season.</p>

<h3 id="setting-everything-up">Setting everything up</h3>

<p>As with most Python projects, we have to begin with a little bit of setup. Plotly’s quite simple in this regard, though, and can be imported with a single line – or two words, to be exact.</p>

<blockquote>
  <p>import plotly</p>
</blockquote>

<h3 id="giving-plotly-our-data">Giving Plotly our data</h3>

<p>Next up, we need to prepare our data for Plotly. This involves setting up variables for the X and Y axes for each series – in this case, the 2016/17 and 2017/18 Premier League seasons.</p>

<blockquote>
  <p>#2016/17 data<br />
lastseason_x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]<br />
lastseason_y = [3, 6, 9, 10, 10, 10, 13, 16, 19, 22, 25, 28, 31]</p>

  <p>#2017/18 data<br />
thisseason_x = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]<br />
thisseason_y = [0, 3, 6, 9, 10, 13, 13, 13, 16, 19, 22, 25, 26]</p>
</blockquote>

<p>The X axis values are matchdays and the Y axis values represent Chelsea’s point count. If I was using Plotly to generate a graph for a more dynamic data set – figures fetched using an API, for example – this would be a bit more complex.</p>

<h3 id="plotting-our-data-on-the-graph">Plotting our data on the graph</h3>

<p>Now we need to tell Plotly how exactly we want this data to appear on the graph. I’ll define two lines to be plotted – one representing last season and one for this season.</p>

<blockquote>
  <p>#Create lines<br />
lastseason_line = plotly.graph_objs.Scatter(<br />
     x = lastseason_x,<br />
     y = lastseason_y,<br />
     mode = ‘lines+markers’,<br />
     name = ‘2016/17’<br />
)<br />
thisseason_line = plotly.graph_objs.Scatter(<br />
     x = thisseason_x,<br />
     y = thisseason_y,<br />
     mode = ‘lines+markers’,<br />
     name = ‘2017/18’<br />
)</p>
</blockquote>

<p>As you can see, I’ve assigned the X and Y axis values I’ve just entered to their corresponding lines, and given the series names. The mode “lines+markers” displays the data as a line with a node at each data point – great for comparing the two seasons.</p>

<h3 id="formatting-and-exporting-the-graph">Formatting and exporting the graph</h3>

<p>Now to bring everything together and make it look pretty. As you can see, I’ve created a variable for my data series and a layout variable, which contains a bunch of formatting options that pretty much do what they say (“dtick” represents the interval between the axis labels). Handily, Plotly accepts RGB or HTML hex colour codes for the colour settings.</p>

<blockquote>
  <p>#Create graph<br />
data = [lastseason_line, thisseason_line]<br />
layout = dict(title = ‘Chelsea Premier League performance – 2016/17 vs. 2017/18’,<br />
          xaxis = dict(title = ‘Matchday’,<br />
               gridcolor=’#555′,<br />
               dtick = 1),<br />
          yaxis = dict(title = ‘Points’,<br />
               gridcolor=’#555′),<br />
          font = dict(family = ‘Arial’,<br />
               color = ‘ddd’),<br />
          paper_bgcolor=’#333′,<br />
          plot_bgcolor=’#333′<br />
)<br />
fig = dict(data=data, layout=layout)<br />
plotly.offline.plot(fig, filename=’cfc_points’)</p>
</blockquote>

<p>I then import all of these into a variable called fig, which I feed into Plotly’s offline graph generation function, telling it to output the results to a file that will be called cfc_points.htm.</p>

<h3 id="output">Output</h3>

<p>As you can see, the end result is a neat interactive graph that looks much flashier than anything anybody ever produced in Microsoft Excel. And you can also see that Chelsea’s point tally is only marginally lower than it was at this stage in the last Premier League season – not bad considering we’re also in the Champions League this year!</p>

<p>This was a fairly simple, trivial example, but at some point I’d love to try to grab some live data from somewhere and use Plotly to generate near-live graphs that make it easier to make sense of. Perhaps I’ll have a chance over my Christmas break…</p>

<div style="background: #ffffd8 !important; float: left; margin-bottom: 20px;">
  <p style="padding: 20px; margin: 0">
    A note: I&#8217;m only just delving into the world of Python, and these posts are as much to get things straight in my own head as they are to show them to others. If anything looks wrong, or there&#8217;s a more efficient way of doing something, please let me know!
  </p>
</div>

<p><em>Photo © <a href="https://www.flickr.com/photos/cfcunofficial/26437226629/" target="_blank">@cfcunofficial (Chelsea Debs)</a> (<a href="https://creativecommons.org/licenses/by-sa/2.0/" target="_blank">CC BY-SA 2.0</a>). Cropped.</em></p>

		
		<div id="prev_next">
			<div class="prev">
				    
						<a href="/2017/11/26/the-day-instagram-advertisingread-my-mind/">&laquo;&nbsp;The day Instagram advertising read my mind</a>
					
			</div>
			<div class="next">
				    
						<a href="/2017/12/18/grabbing-domains-and-urls-from-tcpdump-data-using-python/">Grabbing domains and URLs from tcpdump data using Python&nbsp;&raquo;</a>
					
			</div>
		</div>
		
		<div id="footer">
			&copy; 2017-20 MattCASmith
			<span class="home-link"><a href="/">Go home</a></span>
		</div>
		
		</div>
	
	</body>
</html>